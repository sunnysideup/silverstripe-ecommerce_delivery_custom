2025-07-14 07:56

# running php upgrade inspect see: https://github.com/silverstripe/silverstripe-upgrader
cd /var/www/upgrades/upgradeto4
php /var/www/ss3/upgrader/vendor/silverstripe/upgrader/bin/upgrade-code inspect /var/www/upgrades/upgradeto4/ecommerce_delivery_custom/src  --root-dir=/var/www/upgrades/upgradeto4 --write -vvv
Array
(
    [0] => PHP Deprecated:  Nette\DI\Extensions\PhpExtension is deprecated, use Nette\Bootstrap\Extensions\PhpExtension. in /var/www/ss3/upgrader/vendor/nette/di/src/DI/Extensions/PhpExtension.php on line 29
    [1] => Running post-upgrade on "/var/www/upgrades/upgradeto4/ecommerce_delivery_custom/src"
    [2] => [2025-07-14 07:56:44] Applying ApiChangeWarningsRule to EcommerceCustomDeliveryPostalCode.php...
    [3] => 
    [4] => In ParserAbstract.php line 293:
    [5] => 
    [6] =>   [PhpParser\Error]
    [7] =>   Syntax error, unexpected T_STRING, expecting T_FUNCTION or T_CONST on line 4265
    [8] => 
    [9] => 
    [10] => Exception trace:
    [11] =>   at /var/www/ss3/upgrader/vendor/nikic/php-parser/lib/PhpParser/ParserAbstract.php:293
    [12] =>  PhpParser\ParserAbstract->parse() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Parser/DirectParser.php:41
    [13] =>  PHPStan\Parser\DirectParser->parseString() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Parser/DirectParser.php:32
    [14] =>  PHPStan\Parser\DirectParser->parseFile() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Parser/CachedParser.php:29
    [15] =>  PHPStan\Parser\CachedParser->parseFile() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Type/FileTypeMapper.php:110
    [16] =>  PHPStan\Type\FileTypeMapper->createResolvedPhpDocMap() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Type/FileTypeMapper.php:81
    [17] =>  PHPStan\Type\FileTypeMapper->getResolvedPhpDocMap() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Type/FileTypeMapper.php:61
    [18] =>  PHPStan\Type\FileTypeMapper->getResolvedPhpDoc() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Reflection/Annotations/AnnotationsMethodsClassReflectionExtension.php:72
    [19] =>  PHPStan\Reflection\Annotations\AnnotationsMethodsClassReflectionExtension->createMethods() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Reflection/Annotations/AnnotationsMethodsClassReflectionExtension.php:27
    [20] =>  PHPStan\Reflection\Annotations\AnnotationsMethodsClassReflectionExtension->hasMethod() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Reflection/Php/PhpClassReflectionExtension.php:199
    [21] =>  PHPStan\Reflection\Php\PhpClassReflectionExtension->createMethod() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Reflection/Php/PhpClassReflectionExtension.php:167
    [22] =>  PHPStan\Reflection\Php\PhpClassReflectionExtension->getMethod() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Reflection/ClassReflection.php:170
    [23] =>  PHPStan\Reflection\ClassReflection->getMethod() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Type/ObjectType.php:177
    [24] =>  PHPStan\Type\ObjectType->getMethod() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Rules/Methods/CallStaticMethodsRule.php:164
    [25] =>  PHPStan\Rules\Methods\CallStaticMethodsRule->processNode() at /var/www/ss3/upgrader/vendor/silverstripe/upgrader/src/UpgradeRule/PHP/Visitor/PHPStanScopeVisitor.php:80
    [26] =>  SilverStripe\Upgrader\UpgradeRule\PHP\Visitor\PHPStanScopeVisitor->SilverStripe\Upgrader\UpgradeRule\PHP\Visitor\{closure}() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Analyser/NodeScopeResolver.php:316
    [27] =>  PHPStan\Analyser\NodeScopeResolver->processNode() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Analyser/NodeScopeResolver.php:777
    [28] =>  PHPStan\Analyser\NodeScopeResolver->processNode() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Analyser/NodeScopeResolver.php:176
    [29] =>  PHPStan\Analyser\NodeScopeResolver->processNodes() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Analyser/NodeScopeResolver.php:699
    [30] =>  PHPStan\Analyser\NodeScopeResolver->processNode() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Analyser/NodeScopeResolver.php:176
    [31] =>  PHPStan\Analyser\NodeScopeResolver->processNodes() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Analyser/NodeScopeResolver.php:699
    [32] =>  PHPStan\Analyser\NodeScopeResolver->processNode() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Analyser/NodeScopeResolver.php:176
    [33] =>  PHPStan\Analyser\NodeScopeResolver->processNodes() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Analyser/NodeScopeResolver.php:699
    [34] =>  PHPStan\Analyser\NodeScopeResolver->processNode() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Analyser/NodeScopeResolver.php:176
    [35] =>  PHPStan\Analyser\NodeScopeResolver->processNodes() at /var/www/ss3/upgrader/vendor/silverstripe/upgrader/src/UpgradeRule/PHP/Visitor/PHPStanScopeVisitor.php:82
    [36] =>  SilverStripe\Upgrader\UpgradeRule\PHP\Visitor\PHPStanScopeVisitor->enterNode() at /var/www/ss3/upgrader/vendor/nikic/php-parser/lib/PhpParser/NodeTraverser.php:159
    [37] =>  PhpParser\NodeTraverser->traverseArray() at /var/www/ss3/upgrader/vendor/nikic/php-parser/lib/PhpParser/NodeTraverser.php:85
    [38] =>  PhpParser\NodeTraverser->traverse() at /var/www/ss3/upgrader/vendor/silverstripe/upgrader/src/UpgradeRule/PHP/PHPUpgradeRule.php:28
    [39] =>  SilverStripe\Upgrader\UpgradeRule\PHP\PHPUpgradeRule->transformWithVisitors() at /var/www/ss3/upgrader/vendor/silverstripe/upgrader/src/UpgradeRule/PHP/ApiChangeWarningsRule.php:88
    [40] =>  SilverStripe\Upgrader\UpgradeRule\PHP\ApiChangeWarningsRule->mutateSourceWithVisitors() at /var/www/ss3/upgrader/vendor/silverstripe/upgrader/src/UpgradeRule/PHP/ApiChangeWarningsRule.php:60
    [41] =>  SilverStripe\Upgrader\UpgradeRule\PHP\ApiChangeWarningsRule->upgradeFile() at /var/www/ss3/upgrader/vendor/silverstripe/upgrader/src/Upgrader.php:61
    [42] =>  SilverStripe\Upgrader\Upgrader->upgrade() at /var/www/ss3/upgrader/vendor/silverstripe/upgrader/src/Console/InspectCommand.php:88
    [43] =>  SilverStripe\Upgrader\Console\InspectCommand->execute() at /var/www/ss3/upgrader/vendor/symfony/console/Command/Command.php:255
    [44] =>  Symfony\Component\Console\Command\Command->run() at /var/www/ss3/upgrader/vendor/symfony/console/Application.php:1021
    [45] =>  Symfony\Component\Console\Application->doRunCommand() at /var/www/ss3/upgrader/vendor/symfony/console/Application.php:275
    [46] =>  Symfony\Component\Console\Application->doRun() at /var/www/ss3/upgrader/vendor/symfony/console/Application.php:149
    [47] =>  Symfony\Component\Console\Application->run() at /var/www/ss3/upgrader/vendor/silverstripe/upgrader/bin/upgrade-code:55
    [48] => 
    [49] => inspect [-d|--root-dir ROOT-DIR] [-w|--write] [--skip-visibility] [--] <path>
    [50] => 
)


------------------------------------------------------------------------
To continue, please use the following parameter: startFrom=InspectAPIChanges-1
e.g. php runme.php startFrom=InspectAPIChanges-1
------------------------------------------------------------------------
            
# running php upgrade inspect see: https://github.com/silverstripe/silverstripe-upgrader
cd /var/www/upgrades/upgradeto4
php /var/www/ss3/upgrader/vendor/silverstripe/upgrader/bin/upgrade-code inspect /var/www/upgrades/upgradeto4/ecommerce_delivery_custom/src  --root-dir=/var/www/upgrades/upgradeto4 --write -vvv
Array
(
    [0] => Running post-upgrade on "/var/www/upgrades/upgradeto4/ecommerce_delivery_custom/src"
    [1] => [2025-07-14 07:57:01] Applying ApiChangeWarningsRule to EcommerceCustomDeliveryPostalCode.php...
    [2] => 
    [3] => In ParserAbstract.php line 293:
    [4] => 
    [5] =>   [PhpParser\Error]
    [6] =>   Syntax error, unexpected T_STRING, expecting T_FUNCTION or T_CONST on line 4265
    [7] => 
    [8] => 
    [9] => Exception trace:
    [10] =>   at /var/www/ss3/upgrader/vendor/nikic/php-parser/lib/PhpParser/ParserAbstract.php:293
    [11] =>  PhpParser\ParserAbstract->parse() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Parser/DirectParser.php:41
    [12] =>  PHPStan\Parser\DirectParser->parseString() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Parser/DirectParser.php:32
    [13] =>  PHPStan\Parser\DirectParser->parseFile() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Parser/CachedParser.php:29
    [14] =>  PHPStan\Parser\CachedParser->parseFile() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Type/FileTypeMapper.php:110
    [15] =>  PHPStan\Type\FileTypeMapper->createResolvedPhpDocMap() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Type/FileTypeMapper.php:81
    [16] =>  PHPStan\Type\FileTypeMapper->getResolvedPhpDocMap() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Type/FileTypeMapper.php:61
    [17] =>  PHPStan\Type\FileTypeMapper->getResolvedPhpDoc() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Reflection/Annotations/AnnotationsMethodsClassReflectionExtension.php:72
    [18] =>  PHPStan\Reflection\Annotations\AnnotationsMethodsClassReflectionExtension->createMethods() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Reflection/Annotations/AnnotationsMethodsClassReflectionExtension.php:27
    [19] =>  PHPStan\Reflection\Annotations\AnnotationsMethodsClassReflectionExtension->hasMethod() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Reflection/Php/PhpClassReflectionExtension.php:199
    [20] =>  PHPStan\Reflection\Php\PhpClassReflectionExtension->createMethod() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Reflection/Php/PhpClassReflectionExtension.php:167
    [21] =>  PHPStan\Reflection\Php\PhpClassReflectionExtension->getMethod() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Reflection/ClassReflection.php:170
    [22] =>  PHPStan\Reflection\ClassReflection->getMethod() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Type/ObjectType.php:177
    [23] =>  PHPStan\Type\ObjectType->getMethod() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Rules/Methods/CallStaticMethodsRule.php:164
    [24] =>  PHPStan\Rules\Methods\CallStaticMethodsRule->processNode() at /var/www/ss3/upgrader/vendor/silverstripe/upgrader/src/UpgradeRule/PHP/Visitor/PHPStanScopeVisitor.php:80
    [25] =>  SilverStripe\Upgrader\UpgradeRule\PHP\Visitor\PHPStanScopeVisitor->SilverStripe\Upgrader\UpgradeRule\PHP\Visitor\{closure}() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Analyser/NodeScopeResolver.php:316
    [26] =>  PHPStan\Analyser\NodeScopeResolver->processNode() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Analyser/NodeScopeResolver.php:777
    [27] =>  PHPStan\Analyser\NodeScopeResolver->processNode() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Analyser/NodeScopeResolver.php:176
    [28] =>  PHPStan\Analyser\NodeScopeResolver->processNodes() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Analyser/NodeScopeResolver.php:699
    [29] =>  PHPStan\Analyser\NodeScopeResolver->processNode() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Analyser/NodeScopeResolver.php:176
    [30] =>  PHPStan\Analyser\NodeScopeResolver->processNodes() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Analyser/NodeScopeResolver.php:699
    [31] =>  PHPStan\Analyser\NodeScopeResolver->processNode() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Analyser/NodeScopeResolver.php:176
    [32] =>  PHPStan\Analyser\NodeScopeResolver->processNodes() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Analyser/NodeScopeResolver.php:699
    [33] =>  PHPStan\Analyser\NodeScopeResolver->processNode() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Analyser/NodeScopeResolver.php:176
    [34] =>  PHPStan\Analyser\NodeScopeResolver->processNodes() at /var/www/ss3/upgrader/vendor/silverstripe/upgrader/src/UpgradeRule/PHP/Visitor/PHPStanScopeVisitor.php:82
    [35] =>  SilverStripe\Upgrader\UpgradeRule\PHP\Visitor\PHPStanScopeVisitor->enterNode() at /var/www/ss3/upgrader/vendor/nikic/php-parser/lib/PhpParser/NodeTraverser.php:159
    [36] =>  PhpParser\NodeTraverser->traverseArray() at /var/www/ss3/upgrader/vendor/nikic/php-parser/lib/PhpParser/NodeTraverser.php:85
    [37] =>  PhpParser\NodeTraverser->traverse() at /var/www/ss3/upgrader/vendor/silverstripe/upgrader/src/UpgradeRule/PHP/PHPUpgradeRule.php:28
    [38] =>  SilverStripe\Upgrader\UpgradeRule\PHP\PHPUpgradeRule->transformWithVisitors() at /var/www/ss3/upgrader/vendor/silverstripe/upgrader/src/UpgradeRule/PHP/ApiChangeWarningsRule.php:88
    [39] =>  SilverStripe\Upgrader\UpgradeRule\PHP\ApiChangeWarningsRule->mutateSourceWithVisitors() at /var/www/ss3/upgrader/vendor/silverstripe/upgrader/src/UpgradeRule/PHP/ApiChangeWarningsRule.php:60
    [40] =>  SilverStripe\Upgrader\UpgradeRule\PHP\ApiChangeWarningsRule->upgradeFile() at /var/www/ss3/upgrader/vendor/silverstripe/upgrader/src/Upgrader.php:61
    [41] =>  SilverStripe\Upgrader\Upgrader->upgrade() at /var/www/ss3/upgrader/vendor/silverstripe/upgrader/src/Console/InspectCommand.php:88
    [42] =>  SilverStripe\Upgrader\Console\InspectCommand->execute() at /var/www/ss3/upgrader/vendor/symfony/console/Command/Command.php:255
    [43] =>  Symfony\Component\Console\Command\Command->run() at /var/www/ss3/upgrader/vendor/symfony/console/Application.php:1021
    [44] =>  Symfony\Component\Console\Application->doRunCommand() at /var/www/ss3/upgrader/vendor/symfony/console/Application.php:275
    [45] =>  Symfony\Component\Console\Application->doRun() at /var/www/ss3/upgrader/vendor/symfony/console/Application.php:149
    [46] =>  Symfony\Component\Console\Application->run() at /var/www/ss3/upgrader/vendor/silverstripe/upgrader/bin/upgrade-code:55
    [47] => 
    [48] => inspect [-d|--root-dir ROOT-DIR] [-w|--write] [--skip-visibility] [--] <path>
    [49] => 
)


------------------------------------------------------------------------
To continue, please use the following parameter: startFrom=InspectAPIChanges-1
e.g. php runme.php startFrom=InspectAPIChanges-1
------------------------------------------------------------------------
            
# running php upgrade inspect see: https://github.com/silverstripe/silverstripe-upgrader
cd /var/www/upgrades/upgradeto4
php /var/www/ss3/upgrader/vendor/silverstripe/upgrader/bin/upgrade-code inspect /var/www/upgrades/upgradeto4/ecommerce_delivery_custom/src  --root-dir=/var/www/upgrades/upgradeto4 --write -vvv
Array
(
    [0] => Running post-upgrade on "/var/www/upgrades/upgradeto4/ecommerce_delivery_custom/src"
    [1] => [2025-07-14 07:57:25] Applying ApiChangeWarningsRule to EcommerceCustomDeliveryPostalCode.php...
    [2] => PHP Warning:  Undefined array key 265 in /var/www/ss3/upgrader/vendor/nikic/php-parser/lib/PhpParser/Lexer.php on line 258
    [3] => PHP Warning:  Undefined array key "" in /var/www/ss3/upgrader/vendor/nikic/php-parser/lib/PhpParser/ParserAbstract.php on line 190
    [4] => PHP Warning:  Undefined array key "" in /var/www/ss3/upgrader/vendor/nikic/php-parser/lib/PhpParser/ParserAbstract.php on line 359
    [5] => PHP Warning:  Undefined array key 265 in /var/www/ss3/upgrader/vendor/nikic/php-parser/lib/PhpParser/Lexer.php on line 258
    [6] => PHP Warning:  Undefined array key "" in /var/www/ss3/upgrader/vendor/nikic/php-parser/lib/PhpParser/ParserAbstract.php on line 190
    [7] => PHP Warning:  Undefined array key "" in /var/www/ss3/upgrader/vendor/nikic/php-parser/lib/PhpParser/ParserAbstract.php on line 359
    [8] => 
    [9] => In ParserAbstract.php line 293:
    [10] => 
    [11] =>   [PhpParser\Error]
    [12] =>   Syntax error, unexpected , expecting T_STRING or T_NS_SEPARATOR or '{' on line 3
    [13] => 
    [14] => 
    [15] => Exception trace:
    [16] =>   at /var/www/ss3/upgrader/vendor/nikic/php-parser/lib/PhpParser/ParserAbstract.php:293
    [17] =>  PhpParser\ParserAbstract->parse() at /var/www/ss3/upgrader/vendor/nikic/php-parser/lib/PhpParser/Parser/Multiple.php:50
    [18] =>  PhpParser\Parser\Multiple->tryParse() at /var/www/ss3/upgrader/vendor/nikic/php-parser/lib/PhpParser/Parser/Multiple.php:31
    [19] =>  PhpParser\Parser\Multiple->parse() at /var/www/ss3/upgrader/vendor/silverstripe/upgrader/src/Util/MutableSource.php:45
    [20] =>  SilverStripe\Upgrader\Util\MutableSource->__construct() at /var/www/ss3/upgrader/vendor/silverstripe/upgrader/src/UpgradeRule/PHP/ApiChangeWarningsRule.php:54
    [21] =>  SilverStripe\Upgrader\UpgradeRule\PHP\ApiChangeWarningsRule->upgradeFile() at /var/www/ss3/upgrader/vendor/silverstripe/upgrader/src/Upgrader.php:61
    [22] =>  SilverStripe\Upgrader\Upgrader->upgrade() at /var/www/ss3/upgrader/vendor/silverstripe/upgrader/src/Console/InspectCommand.php:88
    [23] =>  SilverStripe\Upgrader\Console\InspectCommand->execute() at /var/www/ss3/upgrader/vendor/symfony/console/Command/Command.php:255
    [24] =>  Symfony\Component\Console\Command\Command->run() at /var/www/ss3/upgrader/vendor/symfony/console/Application.php:1021
    [25] =>  Symfony\Component\Console\Application->doRunCommand() at /var/www/ss3/upgrader/vendor/symfony/console/Application.php:275
    [26] =>  Symfony\Component\Console\Application->doRun() at /var/www/ss3/upgrader/vendor/symfony/console/Application.php:149
    [27] =>  Symfony\Component\Console\Application->run() at /var/www/ss3/upgrader/vendor/silverstripe/upgrader/bin/upgrade-code:55
    [28] => 
    [29] => inspect [-d|--root-dir ROOT-DIR] [-w|--write] [--skip-visibility] [--] <path>
    [30] => 
)


------------------------------------------------------------------------
To continue, please use the following parameter: startFrom=InspectAPIChanges-1
e.g. php runme.php startFrom=InspectAPIChanges-1
------------------------------------------------------------------------
            
# running php upgrade inspect see: https://github.com/silverstripe/silverstripe-upgrader
cd /var/www/upgrades/upgradeto4
php /var/www/ss3/upgrader/vendor/silverstripe/upgrader/bin/upgrade-code inspect /var/www/upgrades/upgradeto4/ecommerce_delivery_custom/src  --root-dir=/var/www/upgrades/upgradeto4 --write -vvv
Array
(
    [0] => Running post-upgrade on "/var/www/upgrades/upgradeto4/ecommerce_delivery_custom/src"
    [1] => [2025-07-14 07:57:37] Applying ApiChangeWarningsRule to EcommerceCustomDeliveryPostalCode.php...
    [2] => PHP Warning:  Undefined array key 316 in /var/www/ss3/upgrader/vendor/nikic/php-parser/lib/PhpParser/Lexer.php on line 258
    [3] => PHP Warning:  Undefined array key "" in /var/www/ss3/upgrader/vendor/nikic/php-parser/lib/PhpParser/ParserAbstract.php on line 190
    [4] => PHP Warning:  Undefined array key "" in /var/www/ss3/upgrader/vendor/nikic/php-parser/lib/PhpParser/ParserAbstract.php on line 359
    [5] => PHP Warning:  Undefined array key 316 in /var/www/ss3/upgrader/vendor/nikic/php-parser/lib/PhpParser/Lexer.php on line 258
    [6] => PHP Warning:  Undefined array key "" in /var/www/ss3/upgrader/vendor/nikic/php-parser/lib/PhpParser/ParserAbstract.php on line 190
    [7] => PHP Warning:  Undefined array key "" in /var/www/ss3/upgrader/vendor/nikic/php-parser/lib/PhpParser/ParserAbstract.php on line 359
    [8] => 
    [9] => In ParserAbstract.php line 293:
    [10] => 
    [11] =>   [PhpParser\Error]
    [12] =>   Syntax error, unexpected , expecting T_STRING or T_NS_SEPARATOR or '{' on line 3
    [13] => 
    [14] => 
    [15] => Exception trace:
    [16] =>   at /var/www/ss3/upgrader/vendor/nikic/php-parser/lib/PhpParser/ParserAbstract.php:293
    [17] =>  PhpParser\ParserAbstract->parse() at /var/www/ss3/upgrader/vendor/nikic/php-parser/lib/PhpParser/Parser/Multiple.php:50
    [18] =>  PhpParser\Parser\Multiple->tryParse() at /var/www/ss3/upgrader/vendor/nikic/php-parser/lib/PhpParser/Parser/Multiple.php:31
    [19] =>  PhpParser\Parser\Multiple->parse() at /var/www/ss3/upgrader/vendor/silverstripe/upgrader/src/Util/MutableSource.php:45
    [20] =>  SilverStripe\Upgrader\Util\MutableSource->__construct() at /var/www/ss3/upgrader/vendor/silverstripe/upgrader/src/UpgradeRule/PHP/ApiChangeWarningsRule.php:54
    [21] =>  SilverStripe\Upgrader\UpgradeRule\PHP\ApiChangeWarningsRule->upgradeFile() at /var/www/ss3/upgrader/vendor/silverstripe/upgrader/src/Upgrader.php:61
    [22] =>  SilverStripe\Upgrader\Upgrader->upgrade() at /var/www/ss3/upgrader/vendor/silverstripe/upgrader/src/Console/InspectCommand.php:88
    [23] =>  SilverStripe\Upgrader\Console\InspectCommand->execute() at /var/www/ss3/upgrader/vendor/symfony/console/Command/Command.php:255
    [24] =>  Symfony\Component\Console\Command\Command->run() at /var/www/ss3/upgrader/vendor/symfony/console/Application.php:1021
    [25] =>  Symfony\Component\Console\Application->doRunCommand() at /var/www/ss3/upgrader/vendor/symfony/console/Application.php:275
    [26] =>  Symfony\Component\Console\Application->doRun() at /var/www/ss3/upgrader/vendor/symfony/console/Application.php:149
    [27] =>  Symfony\Component\Console\Application->run() at /var/www/ss3/upgrader/vendor/silverstripe/upgrader/bin/upgrade-code:55
    [28] => 
    [29] => inspect [-d|--root-dir ROOT-DIR] [-w|--write] [--skip-visibility] [--] <path>
    [30] => 
)


------------------------------------------------------------------------
To continue, please use the following parameter: startFrom=InspectAPIChanges-1
e.g. php runme.php startFrom=InspectAPIChanges-1
------------------------------------------------------------------------
            
# running php upgrade inspect see: https://github.com/silverstripe/silverstripe-upgrader
cd /var/www/upgrades/upgradeto4
php /var/www/ss3/upgrader/vendor/silverstripe/upgrader/bin/upgrade-code inspect /var/www/upgrades/upgradeto4/ecommerce_delivery_custom/src  --root-dir=/var/www/upgrades/upgradeto4 --write -vvv
Array
(
    [0] => Running post-upgrade on "/var/www/upgrades/upgradeto4/ecommerce_delivery_custom/src"
    [1] => [2025-07-14 07:57:55] Applying ApiChangeWarningsRule to EcommerceCustomDeliveryPostalCode.php...
    [2] => 
    [3] => In ParserAbstract.php line 293:
    [4] => 
    [5] =>   [PhpParser\Error]
    [6] =>   Syntax error, unexpected T_STRING, expecting T_FUNCTION or T_CONST on line 4265
    [7] => 
    [8] => 
    [9] => Exception trace:
    [10] =>   at /var/www/ss3/upgrader/vendor/nikic/php-parser/lib/PhpParser/ParserAbstract.php:293
    [11] =>  PhpParser\ParserAbstract->parse() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Parser/DirectParser.php:41
    [12] =>  PHPStan\Parser\DirectParser->parseString() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Parser/DirectParser.php:32
    [13] =>  PHPStan\Parser\DirectParser->parseFile() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Parser/CachedParser.php:29
    [14] =>  PHPStan\Parser\CachedParser->parseFile() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Type/FileTypeMapper.php:110
    [15] =>  PHPStan\Type\FileTypeMapper->createResolvedPhpDocMap() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Type/FileTypeMapper.php:81
    [16] =>  PHPStan\Type\FileTypeMapper->getResolvedPhpDocMap() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Type/FileTypeMapper.php:61
    [17] =>  PHPStan\Type\FileTypeMapper->getResolvedPhpDoc() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Reflection/Annotations/AnnotationsMethodsClassReflectionExtension.php:72
    [18] =>  PHPStan\Reflection\Annotations\AnnotationsMethodsClassReflectionExtension->createMethods() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Reflection/Annotations/AnnotationsMethodsClassReflectionExtension.php:27
    [19] =>  PHPStan\Reflection\Annotations\AnnotationsMethodsClassReflectionExtension->hasMethod() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Reflection/Php/PhpClassReflectionExtension.php:199
    [20] =>  PHPStan\Reflection\Php\PhpClassReflectionExtension->createMethod() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Reflection/Php/PhpClassReflectionExtension.php:167
    [21] =>  PHPStan\Reflection\Php\PhpClassReflectionExtension->getMethod() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Reflection/ClassReflection.php:170
    [22] =>  PHPStan\Reflection\ClassReflection->getMethod() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Type/ObjectType.php:177
    [23] =>  PHPStan\Type\ObjectType->getMethod() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Rules/Methods/CallStaticMethodsRule.php:164
    [24] =>  PHPStan\Rules\Methods\CallStaticMethodsRule->processNode() at /var/www/ss3/upgrader/vendor/silverstripe/upgrader/src/UpgradeRule/PHP/Visitor/PHPStanScopeVisitor.php:80
    [25] =>  SilverStripe\Upgrader\UpgradeRule\PHP\Visitor\PHPStanScopeVisitor->SilverStripe\Upgrader\UpgradeRule\PHP\Visitor\{closure}() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Analyser/NodeScopeResolver.php:316
    [26] =>  PHPStan\Analyser\NodeScopeResolver->processNode() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Analyser/NodeScopeResolver.php:777
    [27] =>  PHPStan\Analyser\NodeScopeResolver->processNode() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Analyser/NodeScopeResolver.php:176
    [28] =>  PHPStan\Analyser\NodeScopeResolver->processNodes() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Analyser/NodeScopeResolver.php:699
    [29] =>  PHPStan\Analyser\NodeScopeResolver->processNode() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Analyser/NodeScopeResolver.php:176
    [30] =>  PHPStan\Analyser\NodeScopeResolver->processNodes() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Analyser/NodeScopeResolver.php:699
    [31] =>  PHPStan\Analyser\NodeScopeResolver->processNode() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Analyser/NodeScopeResolver.php:176
    [32] =>  PHPStan\Analyser\NodeScopeResolver->processNodes() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Analyser/NodeScopeResolver.php:699
    [33] =>  PHPStan\Analyser\NodeScopeResolver->processNode() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Analyser/NodeScopeResolver.php:176
    [34] =>  PHPStan\Analyser\NodeScopeResolver->processNodes() at /var/www/ss3/upgrader/vendor/silverstripe/upgrader/src/UpgradeRule/PHP/Visitor/PHPStanScopeVisitor.php:82
    [35] =>  SilverStripe\Upgrader\UpgradeRule\PHP\Visitor\PHPStanScopeVisitor->enterNode() at /var/www/ss3/upgrader/vendor/nikic/php-parser/lib/PhpParser/NodeTraverser.php:159
    [36] =>  PhpParser\NodeTraverser->traverseArray() at /var/www/ss3/upgrader/vendor/nikic/php-parser/lib/PhpParser/NodeTraverser.php:85
    [37] =>  PhpParser\NodeTraverser->traverse() at /var/www/ss3/upgrader/vendor/silverstripe/upgrader/src/UpgradeRule/PHP/PHPUpgradeRule.php:28
    [38] =>  SilverStripe\Upgrader\UpgradeRule\PHP\PHPUpgradeRule->transformWithVisitors() at /var/www/ss3/upgrader/vendor/silverstripe/upgrader/src/UpgradeRule/PHP/ApiChangeWarningsRule.php:88
    [39] =>  SilverStripe\Upgrader\UpgradeRule\PHP\ApiChangeWarningsRule->mutateSourceWithVisitors() at /var/www/ss3/upgrader/vendor/silverstripe/upgrader/src/UpgradeRule/PHP/ApiChangeWarningsRule.php:60
    [40] =>  SilverStripe\Upgrader\UpgradeRule\PHP\ApiChangeWarningsRule->upgradeFile() at /var/www/ss3/upgrader/vendor/silverstripe/upgrader/src/Upgrader.php:61
    [41] =>  SilverStripe\Upgrader\Upgrader->upgrade() at /var/www/ss3/upgrader/vendor/silverstripe/upgrader/src/Console/InspectCommand.php:88
    [42] =>  SilverStripe\Upgrader\Console\InspectCommand->execute() at /var/www/ss3/upgrader/vendor/symfony/console/Command/Command.php:255
    [43] =>  Symfony\Component\Console\Command\Command->run() at /var/www/ss3/upgrader/vendor/symfony/console/Application.php:1021
    [44] =>  Symfony\Component\Console\Application->doRunCommand() at /var/www/ss3/upgrader/vendor/symfony/console/Application.php:275
    [45] =>  Symfony\Component\Console\Application->doRun() at /var/www/ss3/upgrader/vendor/symfony/console/Application.php:149
    [46] =>  Symfony\Component\Console\Application->run() at /var/www/ss3/upgrader/vendor/silverstripe/upgrader/bin/upgrade-code:55
    [47] => 
    [48] => inspect [-d|--root-dir ROOT-DIR] [-w|--write] [--skip-visibility] [--] <path>
    [49] => 
)


------------------------------------------------------------------------
To continue, please use the following parameter: startFrom=InspectAPIChanges-1
e.g. php runme.php startFrom=InspectAPIChanges-1
------------------------------------------------------------------------
            
# running php upgrade inspect see: https://github.com/silverstripe/silverstripe-upgrader
cd /var/www/upgrades/upgradeto4
php /var/www/ss3/upgrader/vendor/silverstripe/upgrader/bin/upgrade-code inspect /var/www/upgrades/upgradeto4/ecommerce_delivery_custom/src  --root-dir=/var/www/upgrades/upgradeto4 --write -vvv
Array
(
    [0] => Running post-upgrade on "/var/www/upgrades/upgradeto4/ecommerce_delivery_custom/src"
    [1] => [2025-07-14 07:58:47] Applying ApiChangeWarningsRule to EcommerceCustomDeliveryPostalCode.php...
    [2] => 
    [3] => In DirectParser.php line 43:
    [4] => 
    [5] =>   [PHPStan\ShouldNotHappenException]
    [6] =>   Internal error.
    [7] => 
    [8] => 
    [9] => Exception trace:
    [10] =>   at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Parser/DirectParser.php:43
    [11] =>  PHPStan\Parser\DirectParser->parseString() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Parser/DirectParser.php:32
    [12] =>  PHPStan\Parser\DirectParser->parseFile() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Parser/CachedParser.php:29
    [13] =>  PHPStan\Parser\CachedParser->parseFile() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Type/FileTypeMapper.php:110
    [14] =>  PHPStan\Type\FileTypeMapper->createResolvedPhpDocMap() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Type/FileTypeMapper.php:81
    [15] =>  PHPStan\Type\FileTypeMapper->getResolvedPhpDocMap() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Type/FileTypeMapper.php:61
    [16] =>  PHPStan\Type\FileTypeMapper->getResolvedPhpDoc() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Reflection/Annotations/AnnotationsMethodsClassReflectionExtension.php:72
    [17] =>  PHPStan\Reflection\Annotations\AnnotationsMethodsClassReflectionExtension->createMethods() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Reflection/Annotations/AnnotationsMethodsClassReflectionExtension.php:27
    [18] =>  PHPStan\Reflection\Annotations\AnnotationsMethodsClassReflectionExtension->hasMethod() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Reflection/Php/PhpClassReflectionExtension.php:199
    [19] =>  PHPStan\Reflection\Php\PhpClassReflectionExtension->createMethod() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Reflection/Php/PhpClassReflectionExtension.php:167
    [20] =>  PHPStan\Reflection\Php\PhpClassReflectionExtension->getMethod() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Reflection/ClassReflection.php:170
    [21] =>  PHPStan\Reflection\ClassReflection->getMethod() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Type/ObjectType.php:177
    [22] =>  PHPStan\Type\ObjectType->getMethod() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Rules/Methods/CallStaticMethodsRule.php:164
    [23] =>  PHPStan\Rules\Methods\CallStaticMethodsRule->processNode() at /var/www/ss3/upgrader/vendor/silverstripe/upgrader/src/UpgradeRule/PHP/Visitor/PHPStanScopeVisitor.php:80
    [24] =>  SilverStripe\Upgrader\UpgradeRule\PHP\Visitor\PHPStanScopeVisitor->SilverStripe\Upgrader\UpgradeRule\PHP\Visitor\{closure}() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Analyser/NodeScopeResolver.php:316
    [25] =>  PHPStan\Analyser\NodeScopeResolver->processNode() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Analyser/NodeScopeResolver.php:777
    [26] =>  PHPStan\Analyser\NodeScopeResolver->processNode() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Analyser/NodeScopeResolver.php:176
    [27] =>  PHPStan\Analyser\NodeScopeResolver->processNodes() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Analyser/NodeScopeResolver.php:699
    [28] =>  PHPStan\Analyser\NodeScopeResolver->processNode() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Analyser/NodeScopeResolver.php:176
    [29] =>  PHPStan\Analyser\NodeScopeResolver->processNodes() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Analyser/NodeScopeResolver.php:699
    [30] =>  PHPStan\Analyser\NodeScopeResolver->processNode() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Analyser/NodeScopeResolver.php:176
    [31] =>  PHPStan\Analyser\NodeScopeResolver->processNodes() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Analyser/NodeScopeResolver.php:699
    [32] =>  PHPStan\Analyser\NodeScopeResolver->processNode() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Analyser/NodeScopeResolver.php:176
    [33] =>  PHPStan\Analyser\NodeScopeResolver->processNodes() at /var/www/ss3/upgrader/vendor/silverstripe/upgrader/src/UpgradeRule/PHP/Visitor/PHPStanScopeVisitor.php:82
    [34] =>  SilverStripe\Upgrader\UpgradeRule\PHP\Visitor\PHPStanScopeVisitor->enterNode() at /var/www/ss3/upgrader/vendor/nikic/php-parser/lib/PhpParser/NodeTraverser.php:159
    [35] =>  PhpParser\NodeTraverser->traverseArray() at /var/www/ss3/upgrader/vendor/nikic/php-parser/lib/PhpParser/NodeTraverser.php:85
    [36] =>  PhpParser\NodeTraverser->traverse() at /var/www/ss3/upgrader/vendor/silverstripe/upgrader/src/UpgradeRule/PHP/PHPUpgradeRule.php:28
    [37] =>  SilverStripe\Upgrader\UpgradeRule\PHP\PHPUpgradeRule->transformWithVisitors() at /var/www/ss3/upgrader/vendor/silverstripe/upgrader/src/UpgradeRule/PHP/ApiChangeWarningsRule.php:88
    [38] =>  SilverStripe\Upgrader\UpgradeRule\PHP\ApiChangeWarningsRule->mutateSourceWithVisitors() at /var/www/ss3/upgrader/vendor/silverstripe/upgrader/src/UpgradeRule/PHP/ApiChangeWarningsRule.php:60
    [39] =>  SilverStripe\Upgrader\UpgradeRule\PHP\ApiChangeWarningsRule->upgradeFile() at /var/www/ss3/upgrader/vendor/silverstripe/upgrader/src/Upgrader.php:61
    [40] =>  SilverStripe\Upgrader\Upgrader->upgrade() at /var/www/ss3/upgrader/vendor/silverstripe/upgrader/src/Console/InspectCommand.php:88
    [41] =>  SilverStripe\Upgrader\Console\InspectCommand->execute() at /var/www/ss3/upgrader/vendor/symfony/console/Command/Command.php:255
    [42] =>  Symfony\Component\Console\Command\Command->run() at /var/www/ss3/upgrader/vendor/symfony/console/Application.php:1021
    [43] =>  Symfony\Component\Console\Application->doRunCommand() at /var/www/ss3/upgrader/vendor/symfony/console/Application.php:275
    [44] =>  Symfony\Component\Console\Application->doRun() at /var/www/ss3/upgrader/vendor/symfony/console/Application.php:149
    [45] =>  Symfony\Component\Console\Application->run() at /var/www/ss3/upgrader/vendor/silverstripe/upgrader/bin/upgrade-code:55
    [46] => 
    [47] => inspect [-d|--root-dir ROOT-DIR] [-w|--write] [--skip-visibility] [--] <path>
    [48] => 
)


------------------------------------------------------------------------
To continue, please use the following parameter: startFrom=InspectAPIChanges-1
e.g. php runme.php startFrom=InspectAPIChanges-1
------------------------------------------------------------------------
            
# running php upgrade inspect see: https://github.com/silverstripe/silverstripe-upgrader
cd /var/www/upgrades/upgradeto4
php /var/www/ss3/upgrader/vendor/silverstripe/upgrader/bin/upgrade-code inspect /var/www/upgrades/upgradeto4/ecommerce_delivery_custom/src  --root-dir=/var/www/upgrades/upgradeto4 --write -vvv
Array
(
    [0] => Running post-upgrade on "/var/www/upgrades/upgradeto4/ecommerce_delivery_custom/src"
    [1] => [2025-07-14 07:59:23] Applying ApiChangeWarningsRule to EcommerceCustomDeliveryPostalCode.php...
    [2] => PHP Fatal error:  Uncaught TypeError: Argument 1 passed to PhpParser\NodeTraverser::traverse() must be of the type array, null given, called in /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Parser/DirectParser.php on line 47 and defined in /var/www/ss3/upgrader/vendor/nikic/php-parser/lib/PhpParser/NodeTraverser.php:76
    [3] => Stack trace:
    [4] => #0 /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Parser/DirectParser.php(47): PhpParser\NodeTraverser->traverse()
    [5] => #1 /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Parser/DirectParser.php(34): PHPStan\Parser\DirectParser->parseString()
    [6] => #2 /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Parser/CachedParser.php(29): PHPStan\Parser\DirectParser->parseFile()
    [7] => #3 /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Type/FileTypeMapper.php(110): PHPStan\Parser\CachedParser->parseFile()
    [8] => #4 /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Type/FileTypeMapper.php(81): PHPStan\Type\FileTypeMapper->createResolvedPhpDocMap()
    [9] => #5 /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Type/FileTypeMapper.php(61): PH in /var/www/ss3/upgrader/vendor/nikic/php-parser/lib/PhpParser/NodeTraverser.php on line 76
)


------------------------------------------------------------------------
To continue, please use the following parameter: startFrom=InspectAPIChanges-1
e.g. php runme.php startFrom=InspectAPIChanges-1
------------------------------------------------------------------------
            
# running php upgrade inspect see: https://github.com/silverstripe/silverstripe-upgrader
cd /var/www/upgrades/upgradeto4
php /var/www/ss3/upgrader/vendor/silverstripe/upgrader/bin/upgrade-code inspect /var/www/upgrades/upgradeto4/ecommerce_delivery_custom/src  --root-dir=/var/www/upgrades/upgradeto4 --write -vvv
Array
(
    [0] => Running post-upgrade on "/var/www/upgrades/upgradeto4/ecommerce_delivery_custom/src"
    [1] => [2025-07-14 07:59:33] Applying ApiChangeWarningsRule to EcommerceCustomDeliveryPostalCode.php...
    [2] => PHP Fatal error:  Uncaught TypeError: Argument 1 passed to PhpParser\NodeTraverser::traverse() must be of the type array, null given, called in /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Parser/DirectParser.php on line 47 and defined in /var/www/ss3/upgrader/vendor/nikic/php-parser/lib/PhpParser/NodeTraverser.php:76
    [3] => Stack trace:
    [4] => #0 /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Parser/DirectParser.php(47): PhpParser\NodeTraverser->traverse()
    [5] => #1 /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Parser/DirectParser.php(34): PHPStan\Parser\DirectParser->parseString()
    [6] => #2 /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Parser/CachedParser.php(29): PHPStan\Parser\DirectParser->parseFile()
    [7] => #3 /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Type/FileTypeMapper.php(110): PHPStan\Parser\CachedParser->parseFile()
    [8] => #4 /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Type/FileTypeMapper.php(81): PHPStan\Type\FileTypeMapper->createResolvedPhpDocMap()
    [9] => #5 /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Type/FileTypeMapper.php(61): PH in /var/www/ss3/upgrader/vendor/nikic/php-parser/lib/PhpParser/NodeTraverser.php on line 76
)


------------------------------------------------------------------------
To continue, please use the following parameter: startFrom=InspectAPIChanges-1
e.g. php runme.php startFrom=InspectAPIChanges-1
------------------------------------------------------------------------
            
# running php upgrade inspect see: https://github.com/silverstripe/silverstripe-upgrader
cd /var/www/upgrades/upgradeto4
php /var/www/ss3/upgrader/vendor/silverstripe/upgrader/bin/upgrade-code inspect /var/www/upgrades/upgradeto4/ecommerce_delivery_custom/src  --root-dir=/var/www/upgrades/upgradeto4 --write -vvv
Array
(
    [0] => Running post-upgrade on "/var/www/upgrades/upgradeto4/ecommerce_delivery_custom/src"
    [1] => [2025-07-14 08:07:46] Applying ApiChangeWarningsRule to EcommerceCustomDeliveryPostalCode.php...
    [2] => PHP Fatal error:  Uncaught TypeError: Argument 1 passed to PhpParser\NodeTraverser::traverse() must be of the type array, null given, called in /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Parser/DirectParser.php on line 47 and defined in /var/www/ss3/upgrader/vendor/nikic/php-parser/lib/PhpParser/NodeTraverser.php:76
    [3] => Stack trace:
    [4] => #0 /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Parser/DirectParser.php(47): PhpParser\NodeTraverser->traverse()
    [5] => #1 /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Parser/DirectParser.php(34): PHPStan\Parser\DirectParser->parseString()
    [6] => #2 /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Parser/CachedParser.php(29): PHPStan\Parser\DirectParser->parseFile()
    [7] => #3 /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Type/FileTypeMapper.php(110): PHPStan\Parser\CachedParser->parseFile()
    [8] => #4 /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Type/FileTypeMapper.php(81): PHPStan\Type\FileTypeMapper->createResolvedPhpDocMap()
    [9] => #5 /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Type/FileTypeMapper.php(61): PH in /var/www/ss3/upgrader/vendor/nikic/php-parser/lib/PhpParser/NodeTraverser.php on line 76
)


------------------------------------------------------------------------
To continue, please use the following parameter: startFrom=InspectAPIChanges-1
e.g. php runme.php startFrom=InspectAPIChanges-1
------------------------------------------------------------------------
            
# running php upgrade inspect see: https://github.com/silverstripe/silverstripe-upgrader
cd /var/www/upgrades/upgradeto4
php /var/www/ss3/upgrader/vendor/silverstripe/upgrader/bin/upgrade-code inspect /var/www/upgrades/upgradeto4/ecommerce_delivery_custom/src  --root-dir=/var/www/upgrades/upgradeto4 --write -vvv
Array
(
    [0] => Running post-upgrade on "/var/www/upgrades/upgradeto4/ecommerce_delivery_custom/src"
    [1] => [2025-07-14 08:08:23] Applying ApiChangeWarningsRule to EcommerceCustomDeliveryPostalCode.php...
    [2] => PHP Fatal error:  Uncaught TypeError: Argument 1 passed to PhpParser\NodeVisitor\NameResolver::beforeTraverse() must be of the type array, null given, called in /var/www/ss3/upgrader/vendor/nikic/php-parser/lib/PhpParser/NodeTraverser.php on line 84 and defined in /var/www/ss3/upgrader/vendor/nikic/php-parser/lib/PhpParser/NodeVisitor/NameResolver.php:42
    [3] => Stack trace:
    [4] => #0 /var/www/ss3/upgrader/vendor/nikic/php-parser/lib/PhpParser/NodeTraverser.php(84): PhpParser\NodeVisitor\NameResolver->beforeTraverse()
    [5] => #1 /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Parser/DirectParser.php(47): PhpParser\NodeTraverser->traverse()
    [6] => #2 /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Parser/DirectParser.php(34): PHPStan\Parser\DirectParser->parseString()
    [7] => #3 /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Parser/CachedParser.php(29): PHPStan\Parser\DirectParser->parseFile()
    [8] => #4 /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Type/FileTypeMapper.php(110): PHPStan\Parser\CachedParser->parseFile()
    [9] => #5 /var/www/ss3/upgrader/vendor/phpstan/phpstan in /var/www/ss3/upgrader/vendor/nikic/php-parser/lib/PhpParser/NodeVisitor/NameResolver.php on line 42
)


------------------------------------------------------------------------
To continue, please use the following parameter: startFrom=InspectAPIChanges-1
e.g. php runme.php startFrom=InspectAPIChanges-1
------------------------------------------------------------------------
            
# running php upgrade inspect see: https://github.com/silverstripe/silverstripe-upgrader
cd /var/www/upgrades/upgradeto4
php /var/www/ss3/upgrader/vendor/silverstripe/upgrader/bin/upgrade-code inspect /var/www/upgrades/upgradeto4/ecommerce_delivery_custom/src  --root-dir=/var/www/upgrades/upgradeto4 --write -vvv
Array
(
    [0] => Running post-upgrade on "/var/www/upgrades/upgradeto4/ecommerce_delivery_custom/src"
    [1] => [2025-07-14 08:08:41] Applying ApiChangeWarningsRule to EcommerceCustomDeliveryPostalCode.php...
    [2] => [2025-07-14 08:08:41] Applying UpdateVisibilityRule to EcommerceCustomDeliveryPostalCode.php...
    [3] => [2025-07-14 08:08:41] Applying ApiChangeWarningsRule to EcommerceCustomDeliveryModifier.php...
    [4] => 
    [5] => In Php7.php line 1170:
    [6] => 
    [7] =>   [PhpParser\Error]
    [8] =>   A trailing comma is not allowed here on line 823
    [9] => 
    [10] => 
    [11] => Exception trace:
    [12] =>   at /var/www/ss3/upgrader/vendor/nikic/php-parser/lib/PhpParser/Parser/Php7.php:1170
    [13] =>  PhpParser\Parser\Php7->reduceRule88() at /var/www/ss3/upgrader/vendor/nikic/php-parser/lib/PhpParser/ParserAbstract.php:268
    [14] =>  PhpParser\ParserAbstract->parse() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Parser/DirectParser.php:43
    [15] =>  PHPStan\Parser\DirectParser->parseString() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Parser/DirectParser.php:34
    [16] =>  PHPStan\Parser\DirectParser->parseFile() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Parser/CachedParser.php:29
    [17] =>  PHPStan\Parser\CachedParser->parseFile() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Type/FileTypeMapper.php:110
    [18] =>  PHPStan\Type\FileTypeMapper->createResolvedPhpDocMap() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Type/FileTypeMapper.php:81
    [19] =>  PHPStan\Type\FileTypeMapper->getResolvedPhpDocMap() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Type/FileTypeMapper.php:61
    [20] =>  PHPStan\Type\FileTypeMapper->getResolvedPhpDoc() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Reflection/Annotations/AnnotationsMethodsClassReflectionExtension.php:72
    [21] =>  PHPStan\Reflection\Annotations\AnnotationsMethodsClassReflectionExtension->createMethods() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Reflection/Annotations/AnnotationsMethodsClassReflectionExtension.php:27
    [22] =>  PHPStan\Reflection\Annotations\AnnotationsMethodsClassReflectionExtension->hasMethod() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Reflection/Php/PhpClassReflectionExtension.php:199
    [23] =>  PHPStan\Reflection\Php\PhpClassReflectionExtension->createMethod() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Reflection/Php/PhpClassReflectionExtension.php:167
    [24] =>  PHPStan\Reflection\Php\PhpClassReflectionExtension->getMethod() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Reflection/ClassReflection.php:170
    [25] =>  PHPStan\Reflection\ClassReflection->getMethod() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Analyser/Scope.php:651
    [26] =>  PHPStan\Analyser\Scope->resolveType() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Analyser/Scope.php:323
    [27] =>  PHPStan\Analyser\Scope->getType() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Rules/Arrays/IterableInForeachRule.php:34
    [28] =>  PHPStan\Rules\Arrays\IterableInForeachRule->processNode() at /var/www/ss3/upgrader/vendor/silverstripe/upgrader/src/UpgradeRule/PHP/Visitor/PHPStanScopeVisitor.php:80
    [29] =>  SilverStripe\Upgrader\UpgradeRule\PHP\Visitor\PHPStanScopeVisitor->SilverStripe\Upgrader\UpgradeRule\PHP\Visitor\{closure}() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Analyser/NodeScopeResolver.php:316
    [30] =>  PHPStan\Analyser\NodeScopeResolver->processNode() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Analyser/NodeScopeResolver.php:176
    [31] =>  PHPStan\Analyser\NodeScopeResolver->processNodes() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Analyser/NodeScopeResolver.php:475
    [32] =>  PHPStan\Analyser\NodeScopeResolver->processNode() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Analyser/NodeScopeResolver.php:176
    [33] =>  PHPStan\Analyser\NodeScopeResolver->processNodes() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Analyser/NodeScopeResolver.php:475
    [34] =>  PHPStan\Analyser\NodeScopeResolver->processNode() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Analyser/NodeScopeResolver.php:176
    [35] =>  PHPStan\Analyser\NodeScopeResolver->processNodes() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Analyser/NodeScopeResolver.php:699
    [36] =>  PHPStan\Analyser\NodeScopeResolver->processNode() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Analyser/NodeScopeResolver.php:176
    [37] =>  PHPStan\Analyser\NodeScopeResolver->processNodes() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Analyser/NodeScopeResolver.php:699
    [38] =>  PHPStan\Analyser\NodeScopeResolver->processNode() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Analyser/NodeScopeResolver.php:176
    [39] =>  PHPStan\Analyser\NodeScopeResolver->processNodes() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Analyser/NodeScopeResolver.php:699
    [40] =>  PHPStan\Analyser\NodeScopeResolver->processNode() at /var/www/ss3/upgrader/vendor/phpstan/phpstan/src/Analyser/NodeScopeResolver.php:176
    [41] =>  PHPStan\Analyser\NodeScopeResolver->processNodes() at /var/www/ss3/upgrader/vendor/silverstripe/upgrader/src/UpgradeRule/PHP/Visitor/PHPStanScopeVisitor.php:82
    [42] =>  SilverStripe\Upgrader\UpgradeRule\PHP\Visitor\PHPStanScopeVisitor->enterNode() at /var/www/ss3/upgrader/vendor/nikic/php-parser/lib/PhpParser/NodeTraverser.php:168
    [43] =>  PhpParser\NodeTraverser->traverseArray() at /var/www/ss3/upgrader/vendor/nikic/php-parser/lib/PhpParser/NodeTraverser.php:92
    [44] =>  PhpParser\NodeTraverser->traverse() at /var/www/ss3/upgrader/vendor/silverstripe/upgrader/src/UpgradeRule/PHP/PHPUpgradeRule.php:28
    [45] =>  SilverStripe\Upgrader\UpgradeRule\PHP\PHPUpgradeRule->transformWithVisitors() at /var/www/ss3/upgrader/vendor/silverstripe/upgrader/src/UpgradeRule/PHP/ApiChangeWarningsRule.php:88
    [46] =>  SilverStripe\Upgrader\UpgradeRule\PHP\ApiChangeWarningsRule->mutateSourceWithVisitors() at /var/www/ss3/upgrader/vendor/silverstripe/upgrader/src/UpgradeRule/PHP/ApiChangeWarningsRule.php:60
    [47] =>  SilverStripe\Upgrader\UpgradeRule\PHP\ApiChangeWarningsRule->upgradeFile() at /var/www/ss3/upgrader/vendor/silverstripe/upgrader/src/Upgrader.php:61
    [48] =>  SilverStripe\Upgrader\Upgrader->upgrade() at /var/www/ss3/upgrader/vendor/silverstripe/upgrader/src/Console/InspectCommand.php:88
    [49] =>  SilverStripe\Upgrader\Console\InspectCommand->execute() at /var/www/ss3/upgrader/vendor/symfony/console/Command/Command.php:255
    [50] =>  Symfony\Component\Console\Command\Command->run() at /var/www/ss3/upgrader/vendor/symfony/console/Application.php:1021
    [51] =>  Symfony\Component\Console\Application->doRunCommand() at /var/www/ss3/upgrader/vendor/symfony/console/Application.php:275
    [52] =>  Symfony\Component\Console\Application->doRun() at /var/www/ss3/upgrader/vendor/symfony/console/Application.php:149
    [53] =>  Symfony\Component\Console\Application->run() at /var/www/ss3/upgrader/vendor/silverstripe/upgrader/bin/upgrade-code:55
    [54] => 
    [55] => inspect [-d|--root-dir ROOT-DIR] [-w|--write] [--skip-visibility] [--] <path>
    [56] => 
)


------------------------------------------------------------------------
To continue, please use the following parameter: startFrom=InspectAPIChanges-1
e.g. php runme.php startFrom=InspectAPIChanges-1
------------------------------------------------------------------------
            
# running php upgrade inspect see: https://github.com/silverstripe/silverstripe-upgrader
cd /var/www/upgrades/upgradeto4
php /var/www/ss3/upgrader/vendor/silverstripe/upgrader/bin/upgrade-code inspect /var/www/upgrades/upgradeto4/ecommerce_delivery_custom/src  --root-dir=/var/www/upgrades/upgradeto4 --write -vvv
Writing changes for 0 files
Running post-upgrade on "/var/www/upgrades/upgradeto4/ecommerce_delivery_custom/src"
[2025-07-14 08:09:21] Applying ApiChangeWarningsRule to EcommerceCustomDeliveryPostalCode.php...
PHP Warning:  Undefined array key 265 in /var/www/ss3/upgrader/vendor/nikic/php-parser/lib/PhpParser/Lexer.php on line 258
PHP Warning:  Undefined array key "" in /var/www/ss3/upgrader/vendor/nikic/php-parser/lib/PhpParser/ParserAbstract.php on line 194
PHP Warning:  Undefined array key "" in /var/www/ss3/upgrader/vendor/nikic/php-parser/lib/PhpParser/ParserAbstract.php on line 367
[2025-07-14 08:09:21] Applying UpdateVisibilityRule to EcommerceCustomDeliveryPostalCode.php...
PHP Warning:  Undefined array key 265 in /var/www/ss3/upgrader/vendor/nikic/php-parser/lib/PhpParser/Lexer.php on line 258
PHP Warning:  Undefined array key "" in /var/www/ss3/upgrader/vendor/nikic/php-parser/lib/PhpParser/ParserAbstract.php on line 194
PHP Warning:  Undefined array key "" in /var/www/ss3/upgrader/vendor/nikic/php-parser/lib/PhpParser/ParserAbstract.php on line 367
[2025-07-14 08:09:21] Applying ApiChangeWarningsRule to EcommerceCustomDeliveryModifier.php...
PHP Warning:  Undefined array key 265 in /var/www/ss3/upgrader/vendor/nikic/php-parser/lib/PhpParser/Lexer.php on line 258
PHP Warning:  Undefined array key "" in /var/www/ss3/upgrader/vendor/nikic/php-parser/lib/PhpParser/ParserAbstract.php on line 194
PHP Warning:  Undefined array key "" in /var/www/ss3/upgrader/vendor/nikic/php-parser/lib/PhpParser/ParserAbstract.php on line 367
[2025-07-14 08:09:21] Applying UpdateVisibilityRule to EcommerceCustomDeliveryModifier.php...
PHP Warning:  Undefined array key 265 in /var/www/ss3/upgrader/vendor/nikic/php-parser/lib/PhpParser/Lexer.php on line 258
PHP Warning:  Undefined array key "" in /var/www/ss3/upgrader/vendor/nikic/php-parser/lib/PhpParser/ParserAbstract.php on line 194
PHP Warning:  Undefined array key "" in /var/www/ss3/upgrader/vendor/nikic/php-parser/lib/PhpParser/ParserAbstract.php on line 367
[2025-07-14 08:09:21] Applying ApiChangeWarningsRule to EcommerceCustomDeliveryEcommerceDBConfigExtension.php...
PHP Warning:  Undefined array key 265 in /var/www/ss3/upgrader/vendor/nikic/php-parser/lib/PhpParser/Lexer.php on line 258
PHP Warning:  Undefined array key "" in /var/www/ss3/upgrader/vendor/nikic/php-parser/lib/PhpParser/ParserAbstract.php on line 194
PHP Warning:  Undefined array key "" in /var/www/ss3/upgrader/vendor/nikic/php-parser/lib/PhpParser/ParserAbstract.php on line 367
[2025-07-14 08:09:21] Applying UpdateVisibilityRule to EcommerceCustomDeliveryEcommerceDBConfigExtension.php...
PHP Warning:  Undefined array key 265 in /var/www/ss3/upgrader/vendor/nikic/php-parser/lib/PhpParser/Lexer.php on line 258
PHP Warning:  Undefined array key "" in /var/www/ss3/upgrader/vendor/nikic/php-parser/lib/PhpParser/ParserAbstract.php on line 194
PHP Warning:  Undefined array key "" in /var/www/ss3/upgrader/vendor/nikic/php-parser/lib/PhpParser/ParserAbstract.php on line 367
Writing changes for 0 files
